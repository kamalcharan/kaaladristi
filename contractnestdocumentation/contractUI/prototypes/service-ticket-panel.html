<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Service Ticket Panel — Design Prototype</title>
<style>
  /* ═══════════════════════════════════════════════ */
  /* BASE RESET + TOKENS                            */
  /* ═══════════════════════════════════════════════ */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg-main: #F9FAFB;
    --bg-card: #FFFFFF;
    --bg-hover: #F3F4F6;
    --border: #E5E7EB;
    --border-light: #F3F4F6;
    --text-primary: #111827;
    --text-secondary: #6B7280;
    --text-muted: #9CA3AF;
    --brand: #6366F1;
    --brand-light: #EEF2FF;
    --brand-dark: #4F46E5;
    --success: #10B981;
    --success-light: #ECFDF5;
    --warning: #F59E0B;
    --warning-light: #FFFBEB;
    --error: #EF4444;
    --error-light: #FEF2F2;
    --info: #3B82F6;
    --info-light: #EFF6FF;
    --radius: 12px;
    --radius-sm: 8px;
    --radius-xs: 6px;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 30px rgba(0,0,0,0.12);
    --shadow-panel: -4px 0 30px rgba(0,0,0,0.1);
  }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--bg-main);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ═══════════════════════════════════════════════ */
  /* PAGE LAYOUT                                     */
  /* ═══════════════════════════════════════════════ */
  .page {
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px 24px;
  }
  .page-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 8px;
  }
  .page-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 32px;
    line-height: 1.5;
  }

  /* ═══════════════════════════════════════════════ */
  /* SCENARIO SELECTOR                               */
  /* ═══════════════════════════════════════════════ */
  .scenario-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 32px;
    flex-wrap: wrap;
  }
  .scenario-tab {
    padding: 10px 20px;
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--border);
    background: var(--bg-card);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
  }
  .scenario-tab:hover { border-color: var(--brand); color: var(--brand); }
  .scenario-tab.active {
    background: var(--brand);
    color: white;
    border-color: var(--brand);
  }

  /* ═══════════════════════════════════════════════ */
  /* MOCK BACKGROUND (Operations Tab simulation)     */
  /* ═══════════════════════════════════════════════ */
  .mock-bg {
    background: var(--bg-card);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    padding: 24px;
    min-height: 500px;
    position: relative;
    overflow: hidden;
  }
  .mock-bg-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
    margin-bottom: 16px;
  }
  .mock-event-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: var(--radius-sm);
    background: var(--bg-main);
    border: 1px solid var(--border-light);
    margin-bottom: 8px;
    opacity: 0.5;
  }
  .mock-event-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .mock-event-text { font-size: 12px; color: var(--text-secondary); }

  /* ═══════════════════════════════════════════════ */
  /* BACKDROP                                        */
  /* ═══════════════════════════════════════════════ */
  .backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.25);
    z-index: 40;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }
  .backdrop.visible { opacity: 1; pointer-events: auto; }

  /* ═══════════════════════════════════════════════ */
  /* SLIDE-IN PANEL                                  */
  /* ═══════════════════════════════════════════════ */
  .panel {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 480px;
    background: var(--bg-card);
    border-left: 1px solid var(--border);
    box-shadow: var(--shadow-panel);
    z-index: 50;
    display: flex;
    flex-direction: column;
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .panel.open { transform: translateX(0); }

  /* ─── Panel Header ─── */
  .panel-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: flex-start;
    gap: 14px;
    flex-shrink: 0;
  }
  .panel-header-icon {
    width: 44px; height: 44px;
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .panel-header-content { flex: 1; min-width: 0; }
  .panel-header-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 2px;
  }
  .panel-header-subtitle {
    font-size: 12px;
    color: var(--text-secondary);
  }
  .panel-close {
    width: 32px; height: 32px;
    border-radius: var(--radius-xs);
    border: none;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    transition: all 0.15s;
    flex-shrink: 0;
  }
  .panel-close:hover { background: var(--bg-hover); color: var(--text-primary); }

  /* ─── Panel Body ─── */
  .panel-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px 24px;
  }

  /* ─── Panel Footer ─── */
  .panel-footer {
    padding: 16px 24px;
    border-top: 1px solid var(--border-light);
    display: flex;
    gap: 12px;
    flex-shrink: 0;
    background: var(--bg-card);
  }

  /* ═══════════════════════════════════════════════ */
  /* SHARED COMPONENTS                               */
  /* ═══════════════════════════════════════════════ */

  /* Section Label */
  .section-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--text-muted);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .section-label .count {
    font-size: 10px;
    font-weight: 700;
    padding: 1px 6px;
    border-radius: 10px;
    background: var(--bg-main);
    color: var(--text-secondary);
  }

  /* Section spacing */
  .section { margin-bottom: 24px; }
  .section:last-child { margin-bottom: 0; }

  /* Context Banner — the date/contract context at top of form */
  .context-banner {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border-radius: var(--radius-sm);
    background: var(--brand-light);
    border: 1px solid rgba(99,102,241,0.12);
    margin-bottom: 24px;
  }
  .context-date-box {
    width: 44px; height: 44px;
    border-radius: var(--radius-sm);
    background: var(--brand);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .context-date-day { font-size: 16px; font-weight: 800; line-height: 1; }
  .context-date-month { font-size: 9px; font-weight: 600; text-transform: uppercase; opacity: 0.85; }
  .context-info { flex: 1; }
  .context-info-title { font-size: 13px; font-weight: 700; color: var(--text-primary); }
  .context-info-sub { font-size: 11px; color: var(--text-secondary); margin-top: 1px; }

  /* Event Item — selectable in Create, read-only in Detail */
  .event-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--border-light);
    background: var(--bg-card);
    margin-bottom: 6px;
    transition: all 0.15s;
    cursor: pointer;
  }
  .event-item:hover { border-color: var(--border); background: var(--bg-main); }
  .event-item.selected { border-color: var(--brand); background: var(--brand-light); }
  .event-item.readonly { cursor: default; }
  .event-item.readonly:hover { border-color: var(--border-light); background: var(--bg-card); }

  .event-checkbox {
    width: 18px; height: 18px;
    border-radius: 4px;
    border: 2px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.15s;
  }
  .event-item.selected .event-checkbox {
    background: var(--brand);
    border-color: var(--brand);
  }
  .event-checkbox svg { display: none; }
  .event-item.selected .event-checkbox svg { display: block; }

  .event-type-icon {
    width: 32px; height: 32px;
    border-radius: var(--radius-xs);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .event-type-icon.service { background: rgba(16,185,129,0.08); color: var(--success); }
  .event-type-icon.spare-part { background: rgba(59,130,246,0.08); color: var(--info); }
  .event-type-icon.billing { background: rgba(245,158,11,0.08); color: var(--warning); }

  .event-info { flex: 1; min-width: 0; }
  .event-name { font-size: 12px; font-weight: 600; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .event-meta { font-size: 10px; color: var(--text-secondary); margin-top: 1px; display: flex; align-items: center; gap: 6px; }
  .event-badge {
    font-size: 9px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 10px;
  }

  /* Form Field */
  .form-field { margin-bottom: 20px; }
  .form-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    margin-bottom: 6px;
    display: block;
  }
  .form-select, .form-textarea, .form-input {
    width: 100%;
    padding: 10px 14px;
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--border);
    background: var(--bg-card);
    font-size: 13px;
    color: var(--text-primary);
    transition: border-color 0.15s;
    font-family: inherit;
  }
  .form-select:focus, .form-textarea:focus, .form-input:focus {
    outline: none;
    border-color: var(--brand);
    box-shadow: 0 0 0 3px rgba(99,102,241,0.08);
  }
  .form-textarea { resize: vertical; min-height: 80px; }
  .form-hint { font-size: 10px; color: var(--text-muted); margin-top: 4px; }

  /* Buttons */
  .btn {
    padding: 10px 20px;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex: 1;
  }
  .btn-primary { background: var(--brand); color: white; }
  .btn-primary:hover { background: var(--brand-dark); }
  .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
  .btn-secondary {
    background: transparent;
    color: var(--text-secondary);
    border: 1.5px solid var(--border);
  }
  .btn-secondary:hover { background: var(--bg-hover); border-color: var(--text-muted); }

  /* Status badge */
  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 10px;
  }
  .status-badge.scheduled { background: rgba(107,114,128,0.08); color: #6B7280; }
  .status-badge.assigned { background: rgba(59,130,246,0.08); color: #3B82F6; }
  .status-badge.in-progress { background: rgba(139,92,246,0.08); color: #8B5CF6; }
  .status-badge.completed { background: rgba(16,185,129,0.08); color: #10B981; }

  /* ═══════════════════════════════════════════════ */
  /* SCENARIO A: CREATE TICKET                       */
  /* ═══════════════════════════════════════════════ */
  /* (uses shared components above)                  */

  /* ═══════════════════════════════════════════════ */
  /* SCENARIO B: TICKET DETAIL (view/manage)         */
  /* ═══════════════════════════════════════════════ */

  /* Ticket status strip at top */
  .ticket-status-strip {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 14px 16px;
    border-radius: var(--radius-sm);
    margin-bottom: 24px;
  }
  .ticket-status-strip.status-assigned {
    background: rgba(59,130,246,0.06);
    border: 1px solid rgba(59,130,246,0.12);
  }
  .ticket-status-strip.status-in-progress {
    background: rgba(139,92,246,0.06);
    border: 1px solid rgba(139,92,246,0.12);
  }
  .ticket-status-strip.status-completed {
    background: rgba(16,185,129,0.06);
    border: 1px solid rgba(16,185,129,0.12);
  }

  .ticket-number {
    font-size: 14px;
    font-weight: 800;
    font-variant-numeric: tabular-nums;
  }

  /* Progress stepper */
  .stepper {
    display: flex;
    align-items: center;
    gap: 0;
    margin-bottom: 24px;
  }
  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    position: relative;
  }
  .step-dot {
    width: 28px; height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    margin-bottom: 6px;
    position: relative;
    z-index: 1;
  }
  .step-dot.done { background: var(--success); color: white; }
  .step-dot.active { background: var(--brand); color: white; box-shadow: 0 0 0 4px rgba(99,102,241,0.15); }
  .step-dot.pending { background: var(--bg-main); color: var(--text-muted); border: 2px solid var(--border); }
  .step-label { font-size: 10px; font-weight: 600; color: var(--text-secondary); text-align: center; }
  .step-label.active { color: var(--brand); font-weight: 700; }
  .step-connector {
    flex: 1;
    height: 2px;
    background: var(--border);
    margin-bottom: 20px;
  }
  .step-connector.done { background: var(--success); }
  .step-connector.active { background: linear-gradient(90deg, var(--success), var(--brand)); }

  /* Info row (key-value) */
  .info-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    border-radius: var(--radius-xs);
    margin-bottom: 4px;
  }
  .info-row:nth-child(odd) { background: var(--bg-main); }
  .info-key { font-size: 11px; font-weight: 600; color: var(--text-secondary); }
  .info-value { font-size: 12px; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; gap: 6px; }

  /* Evidence item in detail view */
  .evidence-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--border-light);
    margin-bottom: 6px;
    transition: all 0.15s;
  }
  .evidence-item:hover { border-color: var(--border); }
  .evidence-icon {
    width: 36px; height: 36px;
    border-radius: var(--radius-xs);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .evidence-info { flex: 1; min-width: 0; }
  .evidence-name { font-size: 12px; font-weight: 600; color: var(--text-primary); }
  .evidence-meta { font-size: 10px; color: var(--text-secondary); margin-top: 1px; }
  .evidence-status { flex-shrink: 0; }

  /* Action button strip */
  .action-strip {
    display: flex;
    gap: 8px;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
  }
  .action-btn {
    flex: 1;
    padding: 10px 12px;
    border-radius: var(--radius-sm);
    border: 1.5px solid var(--border);
    background: var(--bg-card);
    font-size: 11px;
    font-weight: 700;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .action-btn:hover { border-color: var(--brand); color: var(--brand); background: var(--brand-light); }
  .action-btn.primary {
    background: var(--brand);
    border-color: var(--brand);
    color: white;
  }
  .action-btn.primary:hover { background: var(--brand-dark); }
  .action-btn.success { border-color: var(--success); color: var(--success); background: var(--success-light); }
  .action-btn.success:hover { background: var(--success); color: white; }

  /* ═══════════════════════════════════════════════ */
  /* DIVIDER                                         */
  /* ═══════════════════════════════════════════════ */
  .divider {
    height: 1px;
    background: var(--border-light);
    margin: 20px 0;
  }

  /* ═══════════════════════════════════════════════ */
  /* EMPTY STATE                                     */
  /* ═══════════════════════════════════════════════ */
  .empty-state {
    text-align: center;
    padding: 24px 16px;
    border-radius: var(--radius-sm);
    border: 1.5px dashed var(--border);
    background: var(--bg-main);
  }
  .empty-state-icon {
    width: 40px; height: 40px;
    border-radius: 50%;
    background: var(--bg-hover);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 10px;
    color: var(--text-muted);
  }
  .empty-state-text { font-size: 12px; color: var(--text-secondary); }

  /* ═══════════════════════════════════════════════ */
  /* SVG icons inline                                */
  /* ═══════════════════════════════════════════════ */
  .icon { width: 16px; height: 16px; }
  .icon-sm { width: 14px; height: 14px; }
  .icon-xs { width: 12px; height: 12px; }
  .icon-lg { width: 20px; height: 20px; }

  /* Hidden utility */
  .hidden { display: none !important; }

  /* Scenario panels */
  .scenario-panel { display: none; }
  .scenario-panel.active { display: block; }
</style>
</head>
<body>
<div class="page">
  <div class="page-title">ContractNest / Prototype</div>
  <h1 style="font-size: 22px; font-weight: 800; margin-bottom: 6px;">Service Ticket — Side Panel Design</h1>
  <p class="page-subtitle">
    Two scenarios: <strong>A) Create Ticket</strong> (triggered by "Start Service" on a date group) and
    <strong>B) Ticket Detail</strong> (triggered by clicking an existing ticket). Click tabs below to switch.
  </p>

  <!-- Scenario Tabs -->
  <div class="scenario-tabs">
    <button class="scenario-tab active" onclick="showScenario('create')">A. Create Service Ticket</button>
    <button class="scenario-tab" onclick="showScenario('detail-assigned')">B. Ticket Detail — Assigned</button>
    <button class="scenario-tab" onclick="showScenario('detail-progress')">C. Ticket Detail — In Progress</button>
    <button class="scenario-tab" onclick="showScenario('detail-completed')">D. Ticket Detail — Completed</button>
  </div>

  <!-- Mock Background -->
  <div class="mock-bg">
    <div class="mock-bg-label">Operations Tab (background — dimmed when panel is open)</div>
    <div class="mock-event-row">
      <div class="mock-event-dot" style="background: var(--success);"></div>
      <span class="mock-event-text">Quarterly AC Maintenance — Service #3</span>
    </div>
    <div class="mock-event-row">
      <div class="mock-event-dot" style="background: var(--info);"></div>
      <span class="mock-event-text">Air Filter Replacement — Spare Part</span>
    </div>
    <div class="mock-event-row">
      <div class="mock-event-dot" style="background: var(--warning);"></div>
      <span class="mock-event-text">Q1 Service Charge — Billing</span>
    </div>
    <div class="mock-event-row">
      <div class="mock-event-dot" style="background: var(--success);"></div>
      <span class="mock-event-text">Monthly Deep Clean — Service #4</span>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════ -->
<!-- BACKDROP                                                -->
<!-- ═══════════════════════════════════════════════════════ -->
<div class="backdrop visible" id="backdrop" onclick="closeAllPanels()"></div>

<!-- ═══════════════════════════════════════════════════════ -->
<!-- PANEL A: CREATE SERVICE TICKET                          -->
<!-- ═══════════════════════════════════════════════════════ -->
<div class="panel open" id="panel-create">
  <!-- Header -->
  <div class="panel-header">
    <div class="panel-header-icon" style="background: var(--brand-light);">
      <!-- Ticket+ icon -->
      <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="var(--brand)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>
        <path d="M12 8v8"/>
        <path d="M8 12h8"/>
      </svg>
    </div>
    <div class="panel-header-content">
      <div class="panel-header-title">Create Service Ticket</div>
      <div class="panel-header-subtitle">Group events into a single service visit</div>
    </div>
    <button class="panel-close" onclick="closeAllPanels()">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <!-- Body -->
  <div class="panel-body">

    <!-- Context Banner: Date + Contract -->
    <div class="context-banner">
      <div class="context-date-box">
        <span class="context-date-day">15</span>
        <span class="context-date-month">Mar</span>
      </div>
      <div class="context-info">
        <div class="context-info-title">Saturday — in 4 days</div>
        <div class="context-info-sub">AMC Contract #CNT-2025-00142 &middot; Prestige Towers</div>
      </div>
    </div>

    <!-- Section: Select Events -->
    <div class="section">
      <div class="section-label">
        Select Events to Include
        <span class="count">3 of 4 selected</span>
      </div>

      <!-- Event: Service -->
      <div class="event-item selected" onclick="this.classList.toggle('selected'); updateCount()">
        <div class="event-checkbox">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="event-type-icon service">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Quarterly AC Maintenance</div>
          <div class="event-meta">
            Service &middot; Visit #3
            <span class="event-badge" style="background: rgba(107,114,128,0.08); color: #6B7280;">Scheduled</span>
          </div>
        </div>
      </div>

      <!-- Event: Spare Part -->
      <div class="event-item selected" onclick="this.classList.toggle('selected'); updateCount()">
        <div class="event-checkbox">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="event-type-icon spare-part">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m7.5 4.27 9 5.15M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5M12 22V12"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Air Filter Replacement</div>
          <div class="event-meta">
            Spare Part
            <span class="event-badge" style="background: rgba(107,114,128,0.08); color: #6B7280;">Scheduled</span>
          </div>
        </div>
      </div>

      <!-- Event: Billing (selected) -->
      <div class="event-item selected" onclick="this.classList.toggle('selected'); updateCount()">
        <div class="event-checkbox">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="event-type-icon billing">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Q1 Service Charge</div>
          <div class="event-meta">
            Billing &middot; &#8377;12,500
            <span class="event-badge" style="background: rgba(107,114,128,0.08); color: #6B7280;">Scheduled</span>
          </div>
        </div>
      </div>

      <!-- Event: Service (not selected) -->
      <div class="event-item" onclick="this.classList.toggle('selected'); updateCount()">
        <div class="event-checkbox">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="event-type-icon service">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Monthly Deep Clean</div>
          <div class="event-meta">
            Service &middot; Visit #4
            <span class="event-badge" style="background: rgba(107,114,128,0.08); color: #6B7280;">Scheduled</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Section: Assign To -->
    <div class="section">
      <div class="form-field">
        <label class="form-label">ASSIGN TECHNICIAN</label>
        <select class="form-select">
          <option value="">Select team member...</option>
          <option value="1" selected>Rajesh Kumar — Field Technician</option>
          <option value="2">Suresh Patel — Senior Technician</option>
          <option value="3">Amit Singh — Junior Technician</option>
        </select>
      </div>
    </div>

    <!-- Section: Scheduled Date (pre-filled, editable) -->
    <div class="section">
      <div class="form-field">
        <label class="form-label">SCHEDULED DATE</label>
        <input type="date" class="form-input" value="2025-03-15">
        <div class="form-hint">Pre-filled from the event date. Change if the visit is on a different day.</div>
      </div>
    </div>

    <!-- Section: Notes -->
    <div class="section">
      <div class="form-field">
        <label class="form-label">SERVICE NOTES <span style="font-weight: 400; color: var(--text-muted);">(optional)</span></label>
        <textarea class="form-textarea" placeholder="Instructions for the technician, special access info, customer requests..."></textarea>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="panel-footer">
    <button class="btn btn-secondary" onclick="closeAllPanels()">Cancel</button>
    <button class="btn btn-primary">
      <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/></svg>
      Create Ticket
    </button>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════ -->
<!-- PANEL B: TICKET DETAIL — ASSIGNED                       -->
<!-- ═══════════════════════════════════════════════════════ -->
<div class="panel" id="panel-detail-assigned">
  <div class="panel-header">
    <div class="panel-header-icon" style="background: rgba(59,130,246,0.08);">
      <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="var(--info)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>
      </svg>
    </div>
    <div class="panel-header-content">
      <div class="panel-header-title" style="display: flex; align-items: center; gap: 8px;">
        TKT-2025-00047
        <span class="status-badge assigned">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></svg>
          Assigned
        </span>
      </div>
      <div class="panel-header-subtitle">Created 11 Mar 2025 &middot; Prestige Towers</div>
    </div>
    <button class="panel-close" onclick="closeAllPanels()">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <div class="panel-body">
    <!-- Stepper: shows where the ticket is in its lifecycle -->
    <div class="stepper">
      <div class="step">
        <div class="step-dot done">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="step-label">Created</div>
      </div>
      <div class="step-connector done"></div>
      <div class="step">
        <div class="step-dot active">2</div>
        <div class="step-label active">Assigned</div>
      </div>
      <div class="step-connector"></div>
      <div class="step">
        <div class="step-dot pending">3</div>
        <div class="step-label">In Progress</div>
      </div>
      <div class="step-connector"></div>
      <div class="step">
        <div class="step-dot pending">4</div>
        <div class="step-label">Completed</div>
      </div>
    </div>

    <!-- Ticket Info -->
    <div class="section">
      <div class="section-label">Ticket Info</div>
      <div class="info-row"><span class="info-key">Technician</span><span class="info-value">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="var(--brand)" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Rajesh Kumar</span></div>
      <div class="info-row"><span class="info-key">Scheduled</span><span class="info-value">15 Mar 2025 (Saturday)</span></div>
      <div class="info-row"><span class="info-key">Events</span><span class="info-value">3 events linked</span></div>
      <div class="info-row"><span class="info-key">Notes</span><span class="info-value" style="font-weight: 500; font-size: 11px;">Access via basement parking, call security 10 min before</span></div>
    </div>

    <!-- Linked Events (read-only) -->
    <div class="section">
      <div class="section-label">Linked Events <span class="count">3</span></div>
      <div class="event-item readonly">
        <div class="event-type-icon service">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Quarterly AC Maintenance</div>
          <div class="event-meta">Service &middot; Visit #3</div>
        </div>
        <span class="status-badge scheduled">Scheduled</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon spare-part">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m7.5 4.27 9 5.15M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5M12 22V12"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Air Filter Replacement</div>
          <div class="event-meta">Spare Part</div>
        </div>
        <span class="status-badge scheduled">Scheduled</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon billing">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Q1 Service Charge</div>
          <div class="event-meta">Billing &middot; &#8377;12,500</div>
        </div>
        <span class="status-badge scheduled">Scheduled</span>
      </div>
    </div>

    <!-- Evidence: empty state (not started yet) -->
    <div class="section">
      <div class="section-label">Evidence <span class="count">0</span></div>
      <div class="empty-state">
        <div class="empty-state-icon">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
        </div>
        <div class="empty-state-text">Evidence will be uploaded during service execution</div>
      </div>
    </div>

    <!-- Actions for Assigned state -->
    <div class="action-strip">
      <button class="action-btn">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        Edit
      </button>
      <button class="action-btn primary">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        Start Service
      </button>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════ -->
<!-- PANEL C: TICKET DETAIL — IN PROGRESS                    -->
<!-- ═══════════════════════════════════════════════════════ -->
<div class="panel" id="panel-detail-progress">
  <div class="panel-header">
    <div class="panel-header-icon" style="background: rgba(139,92,246,0.08);">
      <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>
      </svg>
    </div>
    <div class="panel-header-content">
      <div class="panel-header-title" style="display: flex; align-items: center; gap: 8px;">
        TKT-2025-00047
        <span class="status-badge in-progress">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          In Progress
        </span>
      </div>
      <div class="panel-header-subtitle">Started 15 Mar 2025 10:30 AM &middot; Rajesh Kumar</div>
    </div>
    <button class="panel-close" onclick="closeAllPanels()">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <div class="panel-body">
    <!-- Stepper -->
    <div class="stepper">
      <div class="step">
        <div class="step-dot done">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="step-label">Created</div>
      </div>
      <div class="step-connector done"></div>
      <div class="step">
        <div class="step-dot done">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="step-label">Assigned</div>
      </div>
      <div class="step-connector active"></div>
      <div class="step">
        <div class="step-dot active">3</div>
        <div class="step-label active">In Progress</div>
      </div>
      <div class="step-connector"></div>
      <div class="step">
        <div class="step-dot pending">4</div>
        <div class="step-label">Completed</div>
      </div>
    </div>

    <!-- Ticket Info (condensed in-progress) -->
    <div class="section">
      <div class="section-label">Ticket Info</div>
      <div class="info-row"><span class="info-key">Technician</span><span class="info-value">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="var(--brand)" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Rajesh Kumar</span></div>
      <div class="info-row"><span class="info-key">Started</span><span class="info-value">15 Mar 2025, 10:30 AM</span></div>
      <div class="info-row"><span class="info-key">Duration</span><span class="info-value" style="color: #8B5CF6;">1h 23m (ongoing)</span></div>
    </div>

    <!-- Evidence: some uploaded -->
    <div class="section">
      <div class="section-label">Evidence <span class="count">1 of 2 verified</span></div>

      <!-- Uploaded & verified -->
      <div class="evidence-item">
        <div class="evidence-icon" style="background: rgba(6,182,212,0.08);">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="#06B6D4" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
        </div>
        <div class="evidence-info">
          <div class="evidence-name">Before — AC Unit Photo</div>
          <div class="evidence-meta">Upload &middot; 2.1 MB &middot; 10:32 AM</div>
        </div>
        <div class="evidence-status">
          <span class="status-badge completed">
            <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            Verified
          </span>
        </div>
      </div>

      <!-- Uploaded, pending verification -->
      <div class="evidence-item">
        <div class="evidence-icon" style="background: rgba(16,185,129,0.08);">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <div class="evidence-info">
          <div class="evidence-name">OTP Confirmation</div>
          <div class="evidence-meta">Customer verification &middot; 11:45 AM</div>
        </div>
        <div class="evidence-status">
          <span class="status-badge" style="background: rgba(245,158,11,0.08); color: var(--warning);">
            <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            Pending
          </span>
        </div>
      </div>

      <!-- Upload more -->
      <button class="action-btn" style="width: 100%; margin-top: 8px; border-style: dashed;">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Upload Evidence
      </button>
    </div>

    <!-- Linked Events -->
    <div class="section">
      <div class="section-label">Linked Events <span class="count">3</span></div>
      <div class="event-item readonly">
        <div class="event-type-icon service">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Quarterly AC Maintenance</div>
          <div class="event-meta">Service &middot; Visit #3</div>
        </div>
        <span class="status-badge in-progress">In Progress</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon spare-part">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m7.5 4.27 9 5.15M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5M12 22V12"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Air Filter Replacement</div>
          <div class="event-meta">Spare Part</div>
        </div>
        <span class="status-badge in-progress">In Progress</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon billing">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        </div>
        <div class="event-info">
          <div class="event-name">Q1 Service Charge</div>
          <div class="event-meta">Billing &middot; &#8377;12,500</div>
        </div>
        <span class="status-badge scheduled">Scheduled</span>
      </div>
    </div>

    <!-- Actions for In Progress -->
    <div class="action-strip">
      <button class="action-btn">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        Put On Hold
      </button>
      <button class="action-btn success">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        Complete Service
      </button>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════ -->
<!-- PANEL D: TICKET DETAIL — COMPLETED                      -->
<!-- ═══════════════════════════════════════════════════════ -->
<div class="panel" id="panel-detail-completed">
  <div class="panel-header">
    <div class="panel-header-icon" style="background: rgba(16,185,129,0.08);">
      <svg class="icon-lg" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>
      </svg>
    </div>
    <div class="panel-header-content">
      <div class="panel-header-title" style="display: flex; align-items: center; gap: 8px;">
        TKT-2025-00047
        <span class="status-badge completed">
          <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
          Completed
        </span>
      </div>
      <div class="panel-header-subtitle">Completed 15 Mar 2025, 12:15 PM &middot; Duration: 1h 45m</div>
    </div>
    <button class="panel-close" onclick="closeAllPanels()">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>
    </button>
  </div>

  <div class="panel-body">
    <!-- Stepper: all done -->
    <div class="stepper">
      <div class="step">
        <div class="step-dot done"><svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div class="step-label">Created</div>
      </div>
      <div class="step-connector done"></div>
      <div class="step">
        <div class="step-dot done"><svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div class="step-label">Assigned</div>
      </div>
      <div class="step-connector done"></div>
      <div class="step">
        <div class="step-dot done"><svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div class="step-label">In Progress</div>
      </div>
      <div class="step-connector done"></div>
      <div class="step">
        <div class="step-dot done"><svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div>
        <div class="step-label">Completed</div>
      </div>
    </div>

    <!-- Summary Card -->
    <div class="section">
      <div class="section-label">Summary</div>
      <div class="info-row"><span class="info-key">Technician</span><span class="info-value">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="var(--brand)" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        Rajesh Kumar</span></div>
      <div class="info-row"><span class="info-key">Scheduled</span><span class="info-value">15 Mar 2025</span></div>
      <div class="info-row"><span class="info-key">Started</span><span class="info-value">10:30 AM</span></div>
      <div class="info-row"><span class="info-key">Completed</span><span class="info-value" style="color: var(--success);">12:15 PM (1h 45m)</span></div>
      <div class="info-row"><span class="info-key">Events</span><span class="info-value">3 completed</span></div>
      <div class="info-row"><span class="info-key">Evidence</span><span class="info-value" style="color: var(--success);">2/2 verified</span></div>
    </div>

    <!-- Completion Notes -->
    <div class="section">
      <div class="section-label">Completion Notes</div>
      <div style="padding: 12px 14px; border-radius: var(--radius-sm); background: var(--bg-main); font-size: 12px; color: var(--text-primary); line-height: 1.6;">
        AC unit serviced, filters replaced. Customer confirmed working fine. Noted minor rust on outdoor unit bracket — recommend replacement in next visit.
      </div>
    </div>

    <!-- Evidence: all verified -->
    <div class="section">
      <div class="section-label">Evidence <span class="count" style="background: var(--success-light); color: var(--success);">2/2 Verified</span></div>
      <div class="evidence-item">
        <div class="evidence-icon" style="background: rgba(6,182,212,0.08);">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="#06B6D4" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
        </div>
        <div class="evidence-info">
          <div class="evidence-name">Before — AC Unit Photo</div>
          <div class="evidence-meta">Upload &middot; 2.1 MB &middot; 10:32 AM</div>
        </div>
        <span class="status-badge completed">Verified</span>
      </div>
      <div class="evidence-item">
        <div class="evidence-icon" style="background: rgba(16,185,129,0.08);">
          <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <div class="evidence-info">
          <div class="evidence-name">OTP Confirmation</div>
          <div class="evidence-meta">Customer verified &middot; 12:10 PM</div>
        </div>
        <span class="status-badge completed">Verified</span>
      </div>
    </div>

    <!-- Linked Events — all completed -->
    <div class="section">
      <div class="section-label">Linked Events <span class="count">3</span></div>
      <div class="event-item readonly">
        <div class="event-type-icon service"><svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
        <div class="event-info"><div class="event-name">Quarterly AC Maintenance</div><div class="event-meta">Service &middot; Visit #3</div></div>
        <span class="status-badge completed">Completed</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon spare-part"><svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m7.5 4.27 9 5.15M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5M12 22V12"/></svg></div>
        <div class="event-info"><div class="event-name">Air Filter Replacement</div><div class="event-meta">Spare Part &middot; Installed</div></div>
        <span class="status-badge completed">Installed</span>
      </div>
      <div class="event-item readonly">
        <div class="event-type-icon billing"><svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></div>
        <div class="event-info"><div class="event-name">Q1 Service Charge</div><div class="event-meta">Billing &middot; &#8377;12,500</div></div>
        <span class="status-badge completed">Paid</span>
      </div>
    </div>

    <!-- Actions for Completed -->
    <div class="action-strip">
      <button class="action-btn">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Download Report
      </button>
      <button class="action-btn">
        <svg class="icon-xs" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Reopen
      </button>
    </div>
  </div>
</div>

<script>
function closeAllPanels() {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('open'));
  document.getElementById('backdrop').classList.remove('visible');
}

function showScenario(id) {
  // Update tabs
  document.querySelectorAll('.scenario-tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');

  // Close all panels
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('open'));

  // Open the right one
  const panelMap = {
    'create': 'panel-create',
    'detail-assigned': 'panel-detail-assigned',
    'detail-progress': 'panel-detail-progress',
    'detail-completed': 'panel-detail-completed',
  };
  const panel = document.getElementById(panelMap[id]);
  if (panel) {
    panel.classList.add('open');
    document.getElementById('backdrop').classList.add('visible');
  }
}

function updateCount() {
  const items = document.querySelectorAll('#panel-create .event-item');
  const selected = document.querySelectorAll('#panel-create .event-item.selected');
  const countEl = document.querySelector('#panel-create .section-label .count');
  if (countEl) countEl.textContent = `${selected.length} of ${items.length} selected`;
}
</script>
</body>
</html>
